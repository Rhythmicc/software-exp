(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60caf391"],{"104c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"信息管理",name:"userInfo"}},[n("UserInfo")],1),n("el-tab-pane",{attrs:{label:"权限",name:"permissmana"}},[n("PermissMana")],1)],1)],1)},l=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:e.showAddHr}},[e._v("添加")])],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.globalLoading,expression:"globalLoading"}],attrs:{"element-loading-text":"正在添加...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("el-table",{staticStyle:{width:"70%"},attrs:{data:e.users.filter((function(t){return!e.search||t.name.includes(e.search)})),border:"",size:"small",stripe:""}},[n("el-table-column",{attrs:{prop:"id",label:"编号",width:"55",sortable:""}}),n("el-table-column",{attrs:{prop:"name",label:"姓名"}}),n("el-table-column",{attrs:{prop:"phone",label:"电话"}}),n("el-table-column",{attrs:{prop:"telephone",label:"手机"}}),n("el-table-column",{attrs:{prop:"address",label:"地址"}}),n("el-table-column",{attrs:{prop:"username",label:"账号"}}),n("el-table-column",{attrs:{prop:"password",label:"密码"}}),n("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{width:"80px",height:"80px",border:"none"},attrs:{src:e.row.userface}})]}}])}),n("el-table-column",{attrs:{prop:"remark",label:"备注"}}),n("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{icon:"el-icon-edit-outline",type:"warning",size:"small"},on:{click:function(n){return e.handleEditHr(t.row)}}},[e._v("编辑")]),n("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger"},on:{click:function(n){return e.handleDeleteHr(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),n("el-dialog",{attrs:{title:"增改用户",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",[n("el-form",{ref:"empForm",attrs:{model:e.hr,rules:e.rules}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"员工姓名:",prop:"name"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入用户名"},model:{value:e.hr.name,callback:function(t){e.$set(e.hr,"name",t)},expression:"hr.name"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[n("el-input",{staticStyle:{width:"120px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入手机号"},model:{value:e.hr.phone,callback:function(t){e.$set(e.hr,"phone",t)},expression:"hr.phone"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"登录权限",prop:"enabled"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.hr.enabled,callback:function(t){e.$set(e.hr,"enabled",t)},expression:"hr.enabled"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"电话号码:",prop:"telephone"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入电话号码"},model:{value:e.hr.telephone,callback:function(t){e.$set(e.hr,"telephone",t)},expression:"hr.telephone"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"联系地址:",prop:"address"}},[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入联系地址"},model:{value:e.hr.address,callback:function(t){e.$set(e.hr,"address",t)},expression:"hr.address"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"登录账户:",prop:"username"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入该用户登录用户名"},model:{value:e.hr.username,callback:function(t){e.$set(e.hr,"username",t)},expression:"hr.username"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{attrs:{label:"图像链接:",prop:"userface"}},[n("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入图片 url"},model:{value:e.hr.userface,callback:function(t){e.$set(e.hr,"userface",t)},expression:"hr.userface"}})],1)],1),n("el-col",{attrs:{span:7}},[n("el-form-item",{attrs:{label:"备注信息:",prop:"remark"}},[n("el-input",{staticStyle:{width:"180px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入备注"},model:{value:e.hr.remark,callback:function(t){e.$set(e.hr,"remark",t)},expression:"hr.remark"}})],1)],1),n("el-col",{attrs:{span:8}},[n("el-form-item",{attrs:{label:"登录密码:",prop:"password"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini","prefix-icon":"el-icon-edit",placeholder:"请输入该用户登陆密码"},model:{value:e.hr.password,callback:function(t){e.$set(e.hr,"password",t)},expression:"hr.password"}})],1)],1)],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.doAddHr}},[e._v("确定")])],1)])],1)])},s=[],r=(n("7f7f"),{name:"UserInfo",data:function(){return{globalLoading:!1,dialogVisible:!1,users:[],hr:{id:0,name:"",phone:"",telephone:"",address:"",enabled:!1,username:"",password:"",userface:"",remark:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},search:"",options:[{value:!1,label:"禁止登录"},{value:!0,label:"允许登录"}]}},mounted:function(){this.initUserInfos()},methods:{__copy___:function(e,t){for(var n in t)e[n]=t[n]},__reset_hr:function(){this.hr.id=0,this.hr.name="",this.hr.phone="",this.hr.telephone="",this.hr.address="",this.hr.enabled=!1,this.hr.username="",this.hr.password="",this.hr.userface="",this.hr.remark=""},initUserInfos:function(){var e=this;this.globalLoading=!0,this.getRequest("/system/hr/").then((function(t){e.globalLoading=!1,t&&(e.users=t)}))},showAddHr:function(){this.dialogVisible=!0},doAddHr:function(){var e=this,t={};this.__copy___(t,this.hr),t.id&&t.id>0?this.$refs["empForm"].validate((function(n){n&&e.putRequest("/system/hr/",t).then((function(t){t&&(e.dialogVisible=!1,e.initUserInfos())}))})):this.$refs["empForm"].validate((function(n){n&&e.postRequest("/system/hr/",t).then((function(t){t&&(e.dialogVisible=!1,e.initUserInfos())}))})),this.__reset_hr(),this.dialogVisible=!1},handleDeleteHr:function(e,t){var n=this;this.$confirm("此操作将永久删除【"+data.name+"】,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.deleteRequest("/system/hr/"+t.id).then((function(t){t&&n.users.splice(e,1)}))})).catch((function(){n.$message({type:"info",message:"已取消删除"})}))},handleEditHr:function(e){this.__copy___(this.hr,e),this.showAddHr()}}}),o=r,c=n("2877"),d=Object(c["a"])(o,i,s,!1,null,null,null),u=d.exports,p=n("8a2c"),h={name:"UserManage",data:function(){return{activeName:"userInfo"}},components:{UserInfo:u,PermissMana:p["a"]}},m=h,f=Object(c["a"])(m,a,l,!1,null,"792b7596",null);t["default"]=f.exports},"381a":function(e,t,n){var a={"./UserManage.vue":"104c"};function l(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}l.keys=function(){return Object.keys(a)},l.resolve=i,e.exports=l,l.id="381a"},"8a2c":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.globalLoading,expression:"globalLoading"}],attrs:{"element-loading-text":"正在添加...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[n("div",{staticClass:"permissManaTool"},[n("el-input",{attrs:{size:"small",placeholder:"请输入角色英文名"},model:{value:e.role.name,callback:function(t){e.$set(e.role,"name",t)},expression:"role.name"}},[n("template",{slot:"prepend"},[e._v("ROLE_")])],2),n("el-input",{attrs:{size:"small",placeholder:"请输入角色中文名"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doAddRole(t)}},model:{value:e.role.nameZh,callback:function(t){e.$set(e.role,"nameZh",t)},expression:"role.nameZh"}}),n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:e.doAddRole}},[e._v("添加角色")])],1),n("div",{staticClass:"permissManaMain"},[n("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在加载...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",accordion:""},on:{change:e.change},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.roles,(function(t,a){return n("el-collapse-item",{key:a,attrs:{title:t.nameZh,name:t.id}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("可访问的资源")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"#ff0000"},attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(n){return e.deleteRole(t)}}})],1),n("div",[n("el-tree",{key:a,ref:"tree",refInFor:!0,attrs:{"show-checkbox":"","node-key":"id","default-checked-keys":e.selectedMenus,data:e.allmenus,props:e.defaultProps}}),n("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[n("el-button",{on:{click:e.cancelUpdate}},[e._v("取消修改")]),n("el-button",{attrs:{type:"primary"},on:{click:function(n){return e.doUpdate(t.id,a)}}},[e._v("确认修改")])],1)],1)])],1)})),1)],1)])},l=[],i=(n("ac6a"),n("7f7f"),{name:"PermissMana",data:function(){return{role:{name:"",nameZh:""},allmenus:[],activeName:-1,selectedMenus:[],roles:[],loading:!1,globalLoading:!1,defaultProps:{children:"children",label:"name"}}},mounted:function(){this.initRoles()},methods:{deleteRole:function(e){var t=this;this.$confirm("此操作将永久删除【"+e.nameZh+"】角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteRequest("/system/basic/permiss/role/"+e.id).then((function(e){e&&t.initRoles()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},doAddRole:function(){var e=this;this.role.name&&this.role.nameZh?(this.globalLoading=!0,this.postRequest("/system/basic/permiss/role",this.role).then((function(t){e.globalLoading=!1,t&&(e.role.name="",e.role.nameZh="",e.initRoles())}))):this.$message.error("数据不可以为空")},cancelUpdate:function(){this.activeName=-1},doUpdate:function(e,t){var n=this,a=this.$refs.tree[t],l=a.getCheckedKeys(!0),i="/system/basic/permiss/?rid="+e;l.forEach((function(e){i+="&mids="+e})),this.putRequest(i).then((function(e){e&&(n.activeName=-1)}))},change:function(e){e&&(this.initAllMenus(),this.initSelectedMenus(e))},initSelectedMenus:function(e){var t=this;this.getRequest("/system/basic/permiss/mids/"+e).then((function(e){e&&(t.selectedMenus=e)}))},initAllMenus:function(){var e=this;this.getRequest("/system/basic/permiss/menus").then((function(t){t&&(e.allmenus=t)}))},initRoles:function(){var e=this;this.loading=!0,this.getRequest("/system/basic/permiss/").then((function(t){e.loading=!1,t&&(e.roles=t)}))}}}),s=i,r=(n("c06a"),n("2877")),o=Object(r["a"])(s,a,l,!1,null,null,null);t["a"]=o.exports},"8f67":function(e,t,n){},c06a:function(e,t,n){"use strict";var a=n("8f67"),l=n.n(a);l.a}}]);
//# sourceMappingURL=chunk-60caf391.5f7c8602.js.map